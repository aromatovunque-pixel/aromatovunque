<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aromat Ovunque* ‚Äì Shop</title>

  <style>
    :root{
      --yellow:#ffd400;
      --green:#1fa34a;
      --red:#e11d2e;

      --bg:#fbfbf7;
      --ink:#111827;
      --muted:#6b7280;
      --line:rgba(0,0,0,.10);
      --shadow:0 18px 50px rgba(0,0,0,.12);
      --shadow2:0 10px 22px rgba(0,0,0,.10);
      --radius:22px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--ink);
      background:
        radial-gradient(900px 520px at 8% -10%, rgba(255,212,0,.18), transparent 62%),
        radial-gradient(900px 520px at 92% -10%, rgba(31,163,74,.14), transparent 62%),
        radial-gradient(900px 520px at 50% 120%, rgba(225,29,46,.10), transparent 62%),
        radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.35), transparent 60%),
        radial-gradient(1.5px 1.5px at 70% 20%, rgba(255,255,255,.25), transparent 60%),
        radial-gradient(1.8px 1.8px at 55% 75%, rgba(255,255,255,.20), transparent 60%),
        var(--bg);
    }

    /* HEADER */
    header{
      position:sticky; top:0; z-index:50;
      background:rgba(255,255,255,.82);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--line);
    }
    .header-inner{
      max-width:1200px; margin:0 auto;
      padding:10px 14px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }

    .brand{
      display:flex; align-items:center; gap:10px;
      min-width: 160px;
    }
    .brand img{
      height:42px; width:auto; display:block;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.14));
      transform: translateZ(0);
    }

    /* NAV: desktop orizzontale */
    .nav{
      display:flex; align-items:center; gap:10px;
      flex-wrap:nowrap;
      overflow-x:auto;
      -webkit-overflow-scrolling:touch;
      scrollbar-width:none;
      padding-bottom:2px;
      max-width: 100%;
    }
    .nav::-webkit-scrollbar{display:none}

    .pill{
      display:inline-flex; align-items:center; justify-content:center; gap:8px;
      padding:10px 14px;
      border-radius:999px;
      border:1px solid var(--line);
      background:#fff;
      text-decoration:none;
      color:#0b0b0b;
      font-weight:900;
      box-shadow:0 8px 18px rgba(0,0,0,.06);
      transition:transform .14s ease, box-shadow .14s ease, background .14s ease;
      white-space:nowrap;
      flex:0 0 auto;
    }
    .pill:hover{
      transform: translateY(-1px);
      box-shadow:0 14px 26px rgba(0,0,0,.10);
    }
    .pill .ico{font-size:16px; line-height:1}
    .pill img{
      width:18px; height:18px; display:block;
      border-radius:6px;
    }

    /* Game: glow giallo */
    .pill.game{
      border-color: rgba(255,212,0,.45);
      box-shadow:0 10px 22px rgba(255,212,0,.18);
    }
    .pill.game:hover{
      background: linear-gradient(90deg, rgba(255,212,0,.95), rgba(255,212,0,.65));
      box-shadow: 0 16px 34px rgba(255,212,0,.28);
      transform: translateY(-2px);
    }

    /* Rabadan banner */
    .pill.rabadan{
      position:relative;
      border-color: rgba(0,0,0,.08);
      background:
        radial-gradient(120px 60px at 18% 50%, rgba(255,212,0,.30), transparent 65%),
        radial-gradient(120px 60px at 50% 50%, rgba(31,163,74,.18), transparent 65%),
        radial-gradient(120px 60px at 82% 50%, rgba(225,29,46,.14), transparent 65%),
        #fff;
      overflow:hidden;
    }
    .pill.rabadan::after{
      content:"";
      position:absolute;
      inset:-40% -30%;
      background: linear-gradient(120deg, transparent 35%, rgba(255,255,255,.55) 45%, transparent 55%);
      transform: translateX(-60%) rotate(6deg);
      animation: shine 3.6s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes shine{
      0%,55%{transform: translateX(-70%) rotate(6deg); opacity:.0}
      65%{opacity:.55}
      100%{transform: translateX(70%) rotate(6deg); opacity:0}
    }

    /* MOBILE: nav in VERTICALE cos√¨ Home+Game si vedono SUBITO */
    @media (max-width: 620px){
      .header-inner{
        align-items:flex-start;
        flex-direction:column;
        gap:10px;
      }
      .brand{min-width:auto}
      .nav{
        width:100%;
        overflow:visible;
        flex-direction:column;
        align-items:stretch;
      }
      .pill{
        width:100%;
        justify-content:flex-start;
      }
    }

    /* LAYOUT */
    .wrap{
      max-width:1200px; margin:0 auto;
      padding:18px 14px 34px;
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:16px;
    }
    @media(max-width:960px){
      .wrap{grid-template-columns:1fr}
    }

    /* SIDEBAR */
    aside{
      background: rgba(255,255,255,.78);
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      overflow:hidden;
      padding:14px;
    }

    /* Toggle categorie (ora si chiama CATEGORIE, non ‚ÄúApri/Chiudi‚Äù) */
    .toggle{
      width:100%;
      padding:12px 12px;
      border-radius:18px;
      border:1px solid var(--line);
      background: linear-gradient(90deg, rgba(255,212,0,.22), rgba(31,163,74,.12), rgba(225,29,46,.10));
      font-weight:950;
      display:flex;
      align-items:center;
      justify-content:space-between;
      cursor:pointer;
      transition:transform .12s ease, box-shadow .12s ease;
      margin-bottom:12px;
    }
    .toggle:hover{
      transform: translateY(-1px);
      box-shadow: 0 16px 28px rgba(0,0,0,.10);
    }
    .toggle .state{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      background:#fff;
      border:1px solid var(--line);
      font-weight:950;
    }

    .catlist{
      display:grid;
      gap:8px;
      overflow:hidden;
      max-height: 800px;
      opacity:1;
      transition:max-height .25s ease, opacity .25s ease;
    }
    aside.collapsed .catlist{max-height:0; opacity:0}

    .catbtn{
      width:100%;
      padding:11px 12px;
      border-radius:16px;
      border:1px solid var(--line);
      background:#fff;
      font-weight:950;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:space-between;
      transition:transform .12s ease, box-shadow .12s ease, background .12s ease;
    }
    .catbtn:hover{transform:translateY(-1px); box-shadow: 0 14px 24px rgba(0,0,0,.10)}
    .catbtn.active{
      background: linear-gradient(90deg, rgba(255,212,0,.22), rgba(31,163,74,.12), rgba(225,29,46,.10));
    }
    .catbtn .count{
      font-size:12px;
      padding:5px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:#fff;
      color:#111;
    }

    /* MAIN */
    main{min-width:0}
    h1{
      margin:0 0 6px;
      font-size:42px;
      letter-spacing:-.6px;
      line-height:1.05;
    }
    .lead{
      margin:0 0 18px;
      color:var(--muted);
      font-weight:700;
      font-size:16px;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:14px;
    }
    @media(max-width:1150px){ .grid{grid-template-columns: repeat(2, 1fr);} }
    @media(max-width:620px){ .grid{grid-template-columns: 1fr;} h1{font-size:36px} }

    .card{
      background: rgba(255,255,255,.86);
      border:1px solid var(--line);
      border-radius: 26px;
      overflow:hidden;
      box-shadow: var(--shadow2);
      transition: transform .18s ease, box-shadow .18s ease;
      display:flex;
      flex-direction:column;
      min-height: 420px;
    }
    .card:hover{
      transform: translateY(-4px);
      box-shadow: var(--shadow);
    }

    /* STAGE */
    .stage{
      position:relative;
      height:240px;
      overflow:hidden;
      background:
        radial-gradient(70% 70% at 50% 35%, rgba(255,212,0,.24), transparent 62%),
        radial-gradient(60% 60% at 25% 85%, rgba(31,163,74,.16), transparent 65%),
        radial-gradient(70% 70% at 78% 88%, rgba(225,29,46,.12), transparent 65%),
        radial-gradient(120% 80% at 50% 110%, rgba(0,0,0,.08), transparent 55%),
        #fff;
    }
    .stage::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(circle at 50% 45%, transparent 18%, rgba(0,0,0,.14) 52%, rgba(0,0,0,.22) 100%);
      opacity:.75;
      pointer-events:none;
    }
    .stage img{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:contain;
      padding:18px 18px 10px;
      transform: translateZ(0);
      filter: drop-shadow(0 22px 26px rgba(0,0,0,.22));
      animation: floaty 6s ease-in-out infinite;
      -webkit-mask-image: radial-gradient(circle at 50% 45%, #000 34%, rgba(0,0,0,.55) 54%, transparent 74%);
      mask-image: radial-gradient(circle at 50% 45%, #000 34%, rgba(0,0,0,.55) 54%, transparent 74%);
      -webkit-mask-repeat:no-repeat;
      mask-repeat:no-repeat;
      -webkit-mask-size:cover;
      mask-size:cover;
    }
    @keyframes floaty{
      0%,100%{transform: translateY(0)}
      50%{transform: translateY(-6px)}
    }

    @media (prefers-reduced-motion: reduce){
      .stage img{animation:none}
      .pill.rabadan::after{animation:none}
      .card{transition:none}
      .pill{transition:none}
    }

    .tag{
      position:absolute;
      top:12px; left:12px;
      background:#111;
      color:#fff;
      padding:8px 12px;
      border-radius:999px;
      font-size:12px;
      font-weight:950;
      letter-spacing:.3px;
      z-index:2;
      box-shadow: 0 10px 18px rgba(0,0,0,.12);
    }
    .sale{
      position:absolute;
      top:12px; right:12px;
      background: var(--yellow);
      padding:9px 12px;
      border-radius:16px;
      font-weight:950;
      z-index:2;
      box-shadow: 0 10px 18px rgba(0,0,0,.10);
    }

    .content{
      padding:14px 16px 16px;
      display:flex;
      flex-direction:column;
      gap:8px;
      flex:1;
    }
    .content h3{
      margin:0;
      font-size:18px;
      letter-spacing:-.2px;
    }
    .content p{
      margin:0;
      color:var(--muted);
      font-size:13px;
      line-height:1.35;
    }

    /* rating */
    .rating{
      margin-top:6px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:10px 12px;
      border-radius:16px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.75);
    }
    .stars{
      display:inline-flex;
      gap:6px;
      user-select:none;
    }
    .star{
      width:20px; height:20px;
      display:inline-grid;
      place-items:center;
      border-radius:6px;
      cursor:pointer;
      transform: translateZ(0);
      transition: transform .10s ease, filter .10s ease;
      font-size:18px;
      line-height:1;
      filter: grayscale(1) opacity(.55);
    }
    .star.on{
      filter: none;
      text-shadow: 0 10px 16px rgba(255,212,0,.22);
    }
    .star:hover{transform: scale(1.08)}
    .meta{
      text-align:right;
      font-size:12px;
      color:var(--muted);
      font-weight:800;
      line-height:1.1;
      white-space:nowrap;
    }

    .actions-row{
      margin-top:auto;
      display:flex;
      gap:10px;
      align-items:center;
    }

    .open{
      flex:1;
      padding:11px 14px;
      border-radius:999px;
      text-align:center;
      font-weight:950;
      text-decoration:none;
      color:#000;
      border:2px solid rgba(0,0,0,.08);
      background:#fff;
      transition: background .14s ease, transform .14s ease, box-shadow .14s ease;
    }
    .open:hover{
      background: linear-gradient(90deg, rgba(255,212,0,.92), rgba(31,163,74,.78), rgba(225,29,46,.70));
      transform: translateY(-1px);
      box-shadow: 0 14px 24px rgba(0,0,0,.10);
    }

    .hidden{display:none !important;}
  </style>
</head>

<body>

<header>
  <div class="header-inner">
    <div class="brand">
      <img src="logo.jpg" alt="Aromat Ovunque">
    </div>

    <nav class="nav" aria-label="Collegamenti">
      <a class="pill" href="index.html"><span class="ico">üè†</span> Home</a>

      <a class="pill" href="https://www.instagram.com/aromatovunque.info?igsh=MXBlZjN0YmI3b3IzdA==" target="_blank" rel="noopener">
        <img src="insta.jpg" alt="Instagram"> Instagram
      </a>

      <a class="pill game" href="game.html"><span class="ico">üéÆ</span> Game</a>

      <a class="pill rabadan" href="https://rabadan.ch" target="_blank" rel="noopener">
        <span class="ico">üü°</span> Rabadan 2026
      </a>
    </nav>
  </div>
</header>

<div class="wrap">

  <aside id="sidebar">
    <!-- BLOCCO CERCHIATO ELIMINATO (via il box con logo + testo) -->

    <button class="toggle" id="toggleCats" type="button" aria-controls="catlist" aria-expanded="true">
      <span>Categorie</span>
      <span class="state" id="toggleLabel">Chiudi</span>
    </button>

    <div class="catlist" id="catlist">
      <button class="catbtn active" data-filter="all">Tutti <span class="count" data-count="all">0</span></button>
      <button class="catbtn" data-filter="bevande">Bevande <span class="count" data-count="bevande">0</span></button>
      <button class="catbtn" data-filter="caffe">Caff√® <span class="count" data-count="caffe">0</span></button>
      <button class="catbtn" data-filter="dolci">Dolci <span class="count" data-count="dolci">0</span></button>
      <button class="catbtn" data-filter="cura">Cura persona <span class="count" data-count="cura">0</span></button>
      <button class="catbtn" data-filter="casa">Casa <span class="count" data-count="casa">0</span></button>
      <button class="catbtn" data-filter="carne">Carne <span class="count" data-count="carne">0</span></button>
      <button class="catbtn" data-filter="animali">Animali <span class="count" data-count="animali">0</span></button>
      <button class="catbtn" data-filter="extra">Extra <span class="count" data-count="extra">0</span></button>
    </div>
  </aside>

  <main>
    <h1>Azioni settimanali</h1>
    <p class="lead">Sconti random 20‚Äì50%. Se non ti convince, √® normale.</p>

    <section class="grid" id="grid">

      <!-- BEVANDE -->
      <article class="card" data-cat="bevande" data-id="coca">
        <div class="stage">
          <span class="tag">BEVANDE</span><span class="sale" data-sale></span>
          <img src="coca.jpg" alt="Coca Aromat">
        </div>
        <div class="content">
          <h3>Coca Aromat</h3>
          <p>Perch√© le scelte semplici non ti interessano.</p>
          <div class="rating" data-rating>
            <div class="stars">
              <span class="star" data-star="1">‚òÖ</span><span class="star" data-star="2">‚òÖ</span><span class="star" data-star="3">‚òÖ</span><span class="star" data-star="4">‚òÖ</span><span class="star" data-star="5">‚òÖ</span>
            </div>
            <div class="meta"><span data-avg>0.0</span>/5<br><span data-votes>0</span> voti</div>
          </div>
          <div class="actions-row"><a class="open" href="coca.jpg">Apri</a></div>
        </div>
      </article>

      <article class="card" data-cat="bevande" data-id="sciroppo">
        <div class="stage">
          <span class="tag">BEVANDE</span><span class="sale" data-sale></span>
          <img src="sciroppo.jpg" alt="Sciroppo Aromat">
        </div>
        <div class="content">
          <h3>Sciroppo Aromat</h3>
          <p>Dolcezza che non perdona.</p>
          <div class="rating" data-rating>
            <div class="stars">
              <span class="star" data-star="1">‚òÖ</span><span class="star" data-star="2">‚òÖ</span><span class="star" data-star="3">‚òÖ</span><span class="star" data-star="4">‚òÖ</span><span class="star" data-star="5">‚òÖ</span>
            </div>
            <div class="meta"><span data-avg>0.0</span>/5<br><span data-votes>0</span> voti</div>
          </div>
          <div class="actions-row"><a class="open" href="sciroppo.jpg">Apri</a></div>
        </div>
      </article>

      <!-- CAFF√à -->
      <article class="card" data-cat="caffe" data-id="caffe">
        <div class="stage">
          <span class="tag">CAFF√à</span><span class="sale" data-sale></span>
          <img src="caffe.jpg" alt="Capsule Espresso Aromat">
        </div>
        <div class="content">
          <h3>Capsule Espresso</h3>
          <p>Compatibili, forti, inevitabili.</p>
          <div class="rating" data-rating>
            <div class="stars">
              <span class="star" data-star="1">‚òÖ</span><span class="star" data-star="2">‚òÖ</span><span class="star" data-star="3">‚òÖ</span><span class="star" data-star="4">‚òÖ</span><span class="star" data-star="5">‚òÖ</span>
            </div>
            <div class="meta"><span data-avg>0.0</span>/5<br><span data-votes>0</span> voti</div>
          </div>
          <div class="actions-row"><a class="open" href="caffe.jpg">Apri</a></div>
        </div>
      </article>

      <!-- DOLCI -->
      <article class="card" data-cat="dolci" data-id="cioccolato">
        <div class="stage">
          <span class="tag">DOLCI</span><span class="sale" data-sale></span>
          <img src="cioccolato.jpg" alt="Cioccolato fondente Aromat">
        </div>
        <div class="content">
          <h3>Cioccolato fondente</h3>
          <p>Forte, testardo. Come il progetto.</p>
          <div class="rating" data-rating>
            <div class="stars">
              <span class="star" data-star="1">‚òÖ</span><span class="star" data-star="2">‚òÖ</span><span class="star" data-star="3">‚òÖ</span><span class="star" data-star="4">‚òÖ</span><span class="star" data-star="5">‚òÖ</span>
            </div>
            <div class="meta"><span data-avg>0.0</span>/5<br><span data-votes>0</span> voti</div>
          </div>
          <div class="actions-row"><a class="open" href="cioccolato.jpg">Apri</a></div>
        </div>
      </article>

      <article class="card" data-cat="dolci" data-id="gelato">
        <div class="stage">
          <span class="tag">DOLCI</span><span class="sale" data-sale></span>
          <img src="gelato.jpg" alt="Gelato Aromat Supreme">
        </div>
        <div class="content">
          <h3>Gelato Aromat Supreme</h3>
          <p>Dolce, cremoso, inspiegabile.</p>
          <div class="rating" data-rating>
            <div class="stars">
              <span class="star" data-star="1">‚òÖ</span><span class="star" data-star="2">‚òÖ</span><span class="star" data-star="3">‚òÖ</span><span class="star" data-star="4">‚òÖ</span><span class="star" data-star="5">‚òÖ</span>
            </div>
            <div class="meta"><span data-avg>0.0</span>/5<br><span data-votes>0</span> voti</div>
          </div>
          <div class="actions-row"><a class="open" href="gelato.jpg">Apri</a></div>
        </div>
      </article>

      <article class="card" data-cat="dolci" data-id="aromella">
        <div class="stage">
          <span class="tag">DOLCI</span><span class="sale" data-sale></span>
          <img src="aromella.jpg" alt="Aromella">
        </div>
        <div class="content">
          <h3>Aromella</h3>
          <p>Spalmabile. Non fare domande.</p>
          <div class="rating" data-rating>
            <div class="stars">
              <span class="star" data-star="1">‚òÖ</span><span class="star" data-star="2">‚òÖ</span><span class="star" data-star="3">‚òÖ</span><span class="star" data-star="4">‚òÖ</span><span class="star" data-star="5">‚òÖ</span>
            </div>
            <div class="meta"><span data-avg>0.0</span>/5<br><span data-votes>0</span> voti</div>
          </div>
          <div class="actions-row"><a class="open" href="aromella.jpg">Apri</a></div>
        </div>
      </article>

      <article class="card" data-cat="dolci" data-id="kellogs">
        <div class="stage">
          <span class="tag">DOLCI</span><span class="sale" data-sale></span>
          <img src="kellogs.jpg" alt="Kellogs Aromat">
        </div>
        <div class="content">
          <h3>Kellogs all‚ÄôAromat</h3>
          <p>Cereali croccanti. Scelte discutibili.</p>
          <div class="rating" data-rating>
            <div class="stars">
              <span class="star" data-star="1">‚òÖ</span><span class="star" data-star="2">‚òÖ</span><span class="star" data-star="3">‚òÖ</span><span class="star" data-star="4">‚òÖ</span><span class="star" data-star="5">‚òÖ</span>
            </div>
            <div class="meta"><span data-avg>0.0</span>/5<br><span data-votes>0</span> voti</div>
          </div>
          <div class="actions-row"><a class="open" href="kellogs.jpg">Apri</a></div>
        </div>
      </article>

      <article class="card" data-cat="dolci" data-id="nesquik">
        <div class="stage">
          <span class="tag">DOLCI</span><span class="sale" data-sale></span>
          <img src="nesquik.jpg" alt="Nesquik Aromat">
        </div>
        <div class="content">
          <h3>Nesquik all‚ÄôAromat</h3>
          <p>Latte giallo, morale grigia.</p>
          <div class="rating" data-rating>
            <div class="stars">
              <span class="star" data-star="1">‚òÖ</span><span class="star" data-star="2">‚òÖ</span><span class="star" data-star="3">‚òÖ</span><span class="star" data-star="4">‚òÖ</span><span class="star" data-star="5">‚òÖ</span>
            </div>
            <div class="meta"><span data-avg>0.0</span>/5<br><span data-votes>0</span> voti</div>
          </div>
          <div class="actions-row"><a class="open" href="nesquik.jpg">Apri</a></div>
        </div>
      </article>

      <!-- CURA -->
      <article class="card" data-cat="cura" data-id="dentifricio">
        <div class="stage">
          <span class="tag">CURA</span><span class="sale" data-sale></span>
          <img src="dentifricio.jpg" alt="Dentifricio all'Aromat">
        </div>
        <div class="content">
          <h3>Dentifricio all‚ÄôAromat</h3>
          <p>Alito potente. Zero compromessi.</p>
          <div class="rating" data-rating>
            <div class="stars">
              <span class="star" data-star="1">‚òÖ</span><span class="star" data-star="2">‚òÖ</span><span class="star" data-star="3">‚òÖ</span><span class="star" data-star="4">‚òÖ</span><span class="star" data-star="5">‚òÖ</span>
            </div>
            <div class="meta"><span data-avg>0.0</span>/5<br><span data-votes>0</span> voti</div>
          </div>
          <div class="actions-row"><a class="open" href="dentifricio.jpg">Apri</a></div>
        </div>
      </article>

      <article class="card" data-cat="cura" data-id="profumo">
        <div class="stage">
          <span class="tag">CURA</span><span class="sale" data-sale></span>
          <img src="profumo.jpg" alt="Eau de Toilette Aromat">
        </div>
        <div class="content">
          <h3>Eau de Toilette</h3>
          <p>Profumo ‚ÄúAromat‚Äù. Coraggio vero.</p>
          <div class="rating" data-rating>
            <div class="stars">
              <span class="star" data-star="1">‚òÖ</span><span class="star" data-star="2">‚òÖ</span><span class="star" data-star="3">‚òÖ</span><span class="star" data-star="4">‚òÖ</span><span class="star" data-star="5">‚òÖ</span>
            </div>
            <div class="meta"><span data-avg>0.0</span>/5<br><span data-votes>0</span> voti</div>
          </div>
          <div class="actions-row"><a class="open" href="profumo.jpg">Apri</a></div>
        </div>
      </article>

      <article class="card" data-cat="cura" data-id="deodorante">
        <div class="stage">
          <span class="tag">CURA</span><span class="sale" data-sale></span>
          <img src="deodorante.jpg" alt="Deodorante Aromat">
        </div>
        <div class="content">
          <h3>Deodorante Aromat</h3>
          <p>48h. O pi√π. Chi lo sa.</p>
          <div class="rating" data-rating>
            <div class="stars">
              <span class="star" data-star="1">‚òÖ</span><span class="star" data-star="2">‚òÖ</span><span class="star" data-star="3">‚òÖ</span><span class="star" data-star="4">‚òÖ</span><span class="star" data-star="5">‚òÖ</span>
            </div>
            <div class="meta"><span data-avg>0.0</span>/5<br><span data-votes>0</span> voti</div>
          </div>
          <div class="actions-row"><a class="open" href="deodorante.jpg">Apri</a></div>
        </div>
      </article>

      <!-- CASA -->
      <article class="card" data-cat="casa" data-id="carta">
        <div class="stage">
          <span class="tag">CASA</span><span class="sale" data-sale></span>
          <img src="carta.jpg" alt="Carta igienica Aromat">
        </div>
        <div class="content">
          <h3>Carta igienica Aromat</h3>
          <p>Piacevolmente insaporita. S√¨, lo so.</p>
          <div class="rating" data-rating>
            <div class="stars">
              <span class="star" data-star="1">‚òÖ</span><span class="star" data-star="2">‚òÖ</span><span class="star" data-star="3">‚òÖ</span><span class="star" data-star="4">‚òÖ</span><span class="star" data-star="5">‚òÖ</span>
            </div>
            <div class="meta"><span data-avg>0.0</span>/5<br><span data-votes>0</span> voti</div>
          </div>
          <div class="actions-row"><a class="open" href="carta.jpg">Apri</a></div>
        </div>
      </article>

      <!-- CARNE -->
      <article class="card" data-cat="carne" data-id="luganighetta">
        <div class="stage">
          <span class="tag">CARNE</span><span class="sale" data-sale></span>
          <img src="luganighetta.jpg" alt="Luganighetta Aromat">
        </div>
        <div class="content">
          <h3>Luganighetta Aromat</h3>
          <p>Spirale perfetta. Decisioni discutibili.</p>
          <div class="rating" data-rating>
            <div class="stars">
              <span class="star" data-star="1">‚òÖ</span><span class="star" data-star="2">‚òÖ</span><span class="star" data-star="3">‚òÖ</span><span class="star" data-star="4">‚òÖ</span><span class="star" data-star="5">‚òÖ</span>
            </div>
            <div class="meta"><span data-avg>0.0</span>/5<br><span data-votes>0</span> voti</div>
          </div>
          <div class="actions-row"><a class="open" href="luganighetta.jpg">Apri</a></div>
        </div>
      </article>

      <!-- ANIMALI -->
      <article class="card" data-cat="animali" data-id="catfood">
        <div class="stage">
          <span class="tag">ANIMALI</span><span class="sale" data-sale></span>
          <img src="IMG_0525.png" alt="Cibo per gatti Aromat">
        </div>
        <div class="content">
          <h3>Cibo per gatti Aromat</h3>
          <p>Per felini con standard‚Ä¶ discutibili.</p>
          <div class="rating" data-rating>
            <div class="stars">
              <span class="star" data-star="1">‚òÖ</span><span class="star" data-star="2">‚òÖ</span><span class="star" data-star="3">‚òÖ</span><span class="star" data-star="4">‚òÖ</span><span class="star" data-star="5">‚òÖ</span>
            </div>
            <div class="meta"><span data-avg>0.0</span>/5<br><span data-votes>0</span> voti</div>
          </div>
          <div class="actions-row"><a class="open" href="IMG_0525.png">Apri</a></div>
        </div>
      </article>

      <!-- EXTRA -->
      <article class="card" data-cat="extra" data-id="sigarette">
        <div class="stage">
          <span class="tag">EXTRA</span><span class="sale" data-sale></span>
          <img src="sigarette.jpg" alt="Sigarette Aromat">
        </div>
        <div class="content">
          <h3>Sigarette Aromat</h3>
          <p>Per chi ama il rischio. Il sito no, quello √® stabile.</p>
          <div class="rating" data-rating>
            <div class="stars">
              <span class="star" data-star="1">‚òÖ</span><span class="star" data-star="2">‚òÖ</span><span class="star" data-star="3">‚òÖ</span><span class="star" data-star="4">‚òÖ</span><span class="star" data-star="5">‚òÖ</span>
            </div>
            <div class="meta"><span data-avg>0.0</span>/5<br><span data-votes>0</span> voti</div>
          </div>
          <div class="actions-row"><a class="open" href="sigarette.jpg">Apri</a></div>
        </div>
      </article>

      <article class="card" data-cat="extra" data-id="cicche">
        <div class="stage">
          <span class="tag">EXTRA</span><span class="sale" data-sale></span>
          <img src="cicche.jpg" alt="Cicche Aromat">
        </div>
        <div class="content">
          <h3>Cicche all‚ÄôAromat</h3>
          <p>Gusto persistente. Pessime scelte.</p>
          <div class="rating" data-rating>
            <div class="stars">
              <span class="star" data-star="1">‚òÖ</span><span class="star" data-star="2">‚òÖ</span><span class="star" data-star="3">‚òÖ</span><span class="star" data-star="4">‚òÖ</span><span class="star" data-star="5">‚òÖ</span>
            </div>
            <div class="meta"><span data-avg>0.0</span>/5<br><span data-votes>0</span> voti</div>
          </div>
          <div class="actions-row"><a class="open" href="cicche.jpg">Apri</a></div>
        </div>
      </article>

      <article class="card" data-cat="extra" data-id="durex">
        <div class="stage">
          <span class="tag">EXTRA</span><span class="sale" data-sale></span>
          <img src="durex.jpg" alt="Preservativi Aromat">
        </div>
        <div class="content">
          <h3>Preservativi Aromat</h3>
          <p>Protezione e sapore. Un incubo completo.</p>
          <div class="rating" data-rating>
            <div class="stars">
              <span class="star" data-star="1">‚òÖ</span><span class="star" data-star="2">‚òÖ</span><span class="star" data-star="3">‚òÖ</span><span class="star" data-star="4">‚òÖ</span><span class="star" data-star="5">‚òÖ</span>
            </div>
            <div class="meta"><span data-avg>0.0</span>/5<br><span data-votes>0</span> voti</div>
          </div>
          <div class="actions-row"><a class="open" href="durex.jpg">Apri</a></div>
        </div>
      </article>

    </section>
  </main>
</div>

<script>
  // Toggle categorie
  const sidebar = document.getElementById("sidebar");
  const toggle = document.getElementById("toggleCats");
  const label = document.getElementById("toggleLabel");

  function setCollapsed(on){
    sidebar.classList.toggle("collapsed", on);
    label.textContent = on ? "Apri" : "Chiudi";
    toggle.setAttribute("aria-expanded", String(!on));
  }
  toggle.addEventListener("click", () => setCollapsed(!sidebar.classList.contains("collapsed")));

  // Mobile: parte chiuso
  if (window.matchMedia("(max-width: 960px)").matches) setCollapsed(true);

  // Filtri
  const buttons = Array.from(document.querySelectorAll(".catbtn"));
  const cards = Array.from(document.querySelectorAll(".card"));

  buttons.forEach(btn => {
    btn.addEventListener("click", () => {
      buttons.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");

      const f = btn.dataset.filter;
      cards.forEach(c => c.classList.toggle("hidden", f !== "all" && c.dataset.cat !== f));

      if (window.matchMedia("(max-width: 960px)").matches) setCollapsed(true);
    });
  });

  // Sconti random 20‚Äì50%
  function rand(min, max){ return Math.floor(Math.random() * (max - min + 1)) + min; }
  document.querySelectorAll("[data-sale]").forEach(el => el.textContent = "-" + rand(20, 50) + "%");

  // Conteggi categorie
  function refreshCounts(){
    const counts = { all: cards.length };
    cards.forEach(c => counts[c.dataset.cat] = (counts[c.dataset.cat] || 0) + 1);
    document.querySelectorAll("[data-count]").forEach(b => {
      const k = b.getAttribute("data-count");
      b.textContent = counts[k] || 0;
    });
  }
  refreshCounts();

  // Rating ‚Äúper sessione‚Äù
  function keyFor(id){ return "rating:" + id; }
  function loadRating(id){
    try{ return JSON.parse(sessionStorage.getItem(keyFor(id))) || null; }
    catch(e){ return null; }
  }
  function saveRating(id, obj){ sessionStorage.setItem(keyFor(id), JSON.stringify(obj)); }
  function seededBase(id){
    let h = 0;
    for (let i=0;i<id.length;i++) h = (h*31 + id.charCodeAt(i)) >>> 0;
    const baseVotes = 12 + (h % 38);
    const baseAvgTenth = 34 + (h % 14);
    const baseSum = Math.round((baseAvgTenth/10) * baseVotes);
    return { votes: baseVotes, sum: baseSum, mine: 0 };
  }
  function paintStars(starsEl, value){
    starsEl.querySelectorAll(".star").forEach(s => {
      const n = Number(s.dataset.star);
      s.classList.toggle("on", n <= value);
    });
  }

  document.querySelectorAll("[data-rating]").forEach(r => {
    const card = r.closest(".card");
    const id = card.getAttribute("data-id") || "x";
    let data = loadRating(id);
    if (!data){ data = seededBase(id); saveRating(id, data); }

    const starsEl = r.querySelector(".stars");
    const avgEl = r.querySelector("[data-avg]");
    const votesEl = r.querySelector("[data-votes]");

    function render(){
      const avg = data.votes ? (data.sum / data.votes) : 0;
      avgEl.textContent = avg.toFixed(1);
      votesEl.textContent = data.votes;
      paintStars(starsEl, data.mine || Math.round(avg));
    }
    render();

    starsEl.querySelectorAll(".star").forEach(star => {
      star.addEventListener("click", () => {
        const v = Number(star.dataset.star);
        data.votes += 1;
        data.sum += v;
        data.mine = v;
        saveRating(id, data);
        render();
        star.style.transform = "scale(1.18)";
        setTimeout(() => (star.style.transform = ""), 120);
      });
    });
  });
</script>

</body>
</html>
